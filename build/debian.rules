#!/usr/bin/make -f

# Uncomment this to turn on verbose mode.
DH_VERBOSE = 1
# $BUILD_ROOT
DESTDIR=/usr/src/packages/BUILD/debian/wsta
USER=$(whoami)
INSTALL_DIR =

# Environment information.
DEB_HOST_MULTIARCH ?= $(shell dpkg-architecture -qDEB_HOST_MULTIARCH)

build:
  pwd
  env
  export PATH="$PATH:$RPM_SOURCE_DIR/bin"
  ls -lah $RPM_BUILD_DIR
  ls -lah $RPM_BUILD_DIR/$RPM_PACKAGE_NAME-$RPM_PACKAGE_VERSION/
  ls -lah $RPM_BUILD_DIR/$RPM_PACKAGE_NAME-$RPM_PACKAGE_VERSION/.cargo
  CARGO_HOME=$RPM_BUILD_DIR/$RPM_PACKAGE_NAME-$RPM_PACKAGE_VERSION/.cargo cargo build --release

install:
  dh_testdir
  dh_testroot
  dh_clean -k
  dh_installdirs

  CARGO_HOME=$RPM_BUILD_DIR/$RPM_PACKAGE_NAME-$RPM_PACKAGE_VERSION/.cargo cargo install --root $RPM_BUILD_ROOT/usr --bin wsta

binary:
  target/release/wsta
